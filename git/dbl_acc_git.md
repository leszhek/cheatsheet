## Настройка git и github
### В том числе - несколько аккаунтов
[Вернуться](./)

Я буду буду показывать на примере macos, но подойдет и для linux, про windows уж - сами :smile:). Мы будем исходить из предположения, что у нас два аккаунта.


### Создание и регистрация SSH ключей

Для начала нужно сконфигурировать **ключи ssh**. За этим можно обратиться к справке самого git'
a:

**Settings -> SSH and GPG keys** и в блоке **SSH Keys** выбрать **generating SSH keys**.<br>Откроется инструкция:

1. Открыть терминал
1. Набрать команду:

```
$ ssh-keygen -t ed25519 -C "your_email@on.github" -f "имя ключа"
```
3. Когда высветиться предложение: *"Enter a file in which to save the key"* нажмите Enter. Если же вы не воспользовались флагом **-f** - введите имя ключа сейчас. **Важно!!!** во втором случае, имя ключа должно быть с полным путем, который можно скопировать здесь же.
1. Дальше будет необходимо ввести пароль на доступ к ключу. **Внимание!!!** это **НЕ** пароль от аккаунта github, это может быть любой пароль.
1. Сгенерируется пара ключей - **private** и **public**. Public будет иметь соответствующее расширение.
1. Возвращаемся из инструкции в **Settings -> SSH and GPG keys** и в блоке **SSH Keys** жмем кнопку **New SSH Key**. Откроется форма, в которой потребуется ввести название ключа (например "Рабочий компьютер") и содержимое публичного ключа, которое можно получить командой:

```
$ cat .ssh/[имя_ключа].pub
```
Копировать нужно полный вывод, включая адрес электронной почты.

Для второго аккаунта - повторить всю последовательность.

### Создание конфига для управления несколькими ключами

**Важно!!!** Если у вас один аккаунт - эту секцию можно пропустить

Итак, у нас, теперь есть несколько ключей от нескольких аккаунтов. Создадим конфиг, чтобы ими управлять.

1. Заходим в .ssh и вводим команду:
```
$ vi config
```
2. Если файл пустой вносим в него:
```
# my personal
Host github.com
	HostName github.com
	User git
	IdentityFile ~/.ssh/[имя личного ключа 1]

# my work account
Host github-work
	HostName github.com
	User git
	IdentityFile ~/.ssh/[имя личного ключа 2]

```

А работает эта штука так:<br>
Теперь, если вы клонируете свой репозиторий с личного аккаунта, вы вводите в терминал команду:
```
git clone git@github.com:leszhek/leszhek.git
```
Т.е. - просто копируете то, что предлагает github. А если будете клонировать с рабочего, нужно будет заменить одну секцию (ту, которая идет за git@):
```
git clone git@github-work:leszhek/leszhek.git
``` 

### Первичная настройка git

Сейчас самое время определиться, какая учетная запись будет основной, а какая - второстепенной и сконфигурировать глобальные username и e-mail, которые будут светиться в коммитах.

Для этого наберем в том же терминале:

```
$ git config --global user.name "John Doe"
$ git config --global user.email johndoe@example.com
```

Для второстепенного аккаунта, в каждом репо нужно будет настраивать локальные значения этих полей, просто наборав в каталоге:

```
$ git config user.name "John Other"
$ git config user.email johnother@example.com
```
